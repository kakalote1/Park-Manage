(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-291afe3d"],{"0834":function(t,e,a){"use strict";a("17c7")},"17c7":function(t,e,a){},"5d41":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.sizeClass},[t._v(t._s(t._f("filtName")(t.username)))])},o=[],i=(a("fb6a"),{components:{},props:["username","size"],filters:{filtName:function(t){return t?t.length>2?t.slice(t.length-2,t.length):t:"员工"}},data:function(){return{sizeClass:""}},computed:{},watch:{},created:function(){"large"==this.size?this.sizeClass="dt-headPortrait-large":(this.size,this.sizeClass="dt-headPortrait-small")},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}}),r=i,s=(a("0834"),a("2877")),c=Object(s["a"])(r,n,o,!1,null,"1031c22d",null);e["a"]=c.exports},"6b5f":function(t,e,a){"use strict";a("7123")},7123:function(t,e,a){},"907a":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dt-table"},[a("van-row",{staticClass:"dt-tab-row dt-tab-rowOne"},[a("div",{staticClass:"dt-item-title"},[t._v("头像")]),a("div",{staticClass:"dt-headPortrait"},[a("headPortrait",{attrs:{size:"small",username:t.information.real_name}})],1)]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("姓名")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.real_name))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("用户名")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.username))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("部门")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.department))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("手机号码")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.mobile))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("电子邮箱")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.email))])])],1)},o=[],i=a("5d41"),r={components:{headPortrait:i["a"]},props:["information","department"],data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},s=r,c=(a("ac6a"),a("2877")),l=Object(c["a"])(s,n,o,!1,null,"f7a0d05a",null);e["a"]=l.exports},ac6a:function(t,e,a){"use strict";a("bbda")},b0c0:function(t,e,a){var n=a("83ab"),o=a("9bf2").f,i=Function.prototype,r=i.toString,s=/^\s*function ([^ (]*)/,c="name";n&&!(c in i)&&o(i,c,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})},bbda:function(t,e,a){},c1ec:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("van-row",{staticClass:"dt-main"},[a("van-row",{staticClass:"dt-title"},[a("van-col",{attrs:{span:"2"}},[a("van-icon",{staticClass:"dt-back",attrs:{name:"arrow-left"},on:{click:t.back}})],1),a("van-col",{attrs:{span:"20"}},[a("p",{staticClass:"dt-home-shouye"},[t._v("基本信息")])])],1),a("van-row",{staticClass:"dt-content"},[a("userInformation",{attrs:{information:t.information,department:t.department}}),a("el-button",{staticStyle:{width:"80%"},attrs:{type:"primary"},on:{click:function(e){t.showPop=!0}}},[t._v("编辑信息")])],1),a("van-popup",{style:{height:"80%"},attrs:{closeable:"",position:"bottom"},model:{value:t.showPop,callback:function(e){t.showPop=e},expression:"showPop"}},[a("div",{staticClass:"pop-box"},[a("van-form",{attrs:{"validate-first":"","submit-on-enter":!1},on:{submit:t.updateInfo}},[a("van-divider",{style:{fontSize:"18px",color:"#1989fa",borderColor:"#1989fa",padding:"0 16px"}},[t._v("修改个人信息")]),a("van-field",{attrs:{name:"real_name",label:"真实姓名",placeholder:"请输入真实姓名",rules:[{required:!0,message:"请输入真实姓名"}]},model:{value:t.upForm.real_name,callback:function(e){t.$set(t.upForm,"real_name",e)},expression:"upForm.real_name"}}),a("van-field",{attrs:{name:"username",label:"用户名",placeholder:"请输入用户名",rules:[{validator:t.checkUserName,message:"用户名只能包含 字母、数字、下划线"}]},model:{value:t.upForm.username,callback:function(e){t.$set(t.upForm,"username",e)},expression:"upForm.username"}}),a("van-field",{attrs:{name:"email",label:"邮箱",placeholder:"请输入邮箱",rules:[{validator:t.checkEmail,message:"请填写正确的邮箱"}]},model:{value:t.upForm.email,callback:function(e){t.$set(t.upForm,"email",e)},expression:"upForm.email"}}),a("van-field",{attrs:{name:"mobile",label:"手机号",placeholder:"请输入手机号",rules:[{validator:t.checkMobile,message:"请填写正确的手机号"}]},model:{value:t.upForm.mobile,callback:function(e){t.$set(t.upForm,"mobile",e)},expression:"upForm.mobile"}}),a("div",{staticStyle:{margin:"50px 16px 16px 16px"}},[a("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1)])],1)},o=[],i=(a("b0c0"),a("907a")),r=a("fa20"),s=a("37a2"),c={components:{userInformation:i["a"]},data:function(){return{information:JSON.parse(localStorage.getItem("userInfo")),department:"",loading:!1,finished:!0,showPop:!1,upForm:{uid:JSON.parse(localStorage.getItem("userInfo")).uid,mobile:JSON.parse(localStorage.getItem("userInfo")).mobile,real_name:JSON.parse(localStorage.getItem("userInfo")).real_name,username:JSON.parse(localStorage.getItem("userInfo")).username,email:JSON.parse(localStorage.getItem("userInfo")).email}}},computed:{},watch:{},created:function(){var t=this;Object(r["b"])((function(e){t.department=e.name}))},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{updateInfo:function(){var t=this;this.upForm.username||this.upForm.email||this.upForm.mobile?this.$dialog.confirm({message:"是否修改个人信息"}).then((function(){Object(s["k"])(t.upForm).then((function(e){console.log("修改返回",e),localStorage.setItem("userInfo",JSON.stringify(e.data)),t.information=e.data,t.$toast("修改成功"),t.showPop=!1}))})).catch():this.$toast("用户名,邮箱,手机号,请至少填写一项")},checkInfo:function(){return!!(this.upForm.username||this.upForm.email||this.upForm.mobile)},checkUserName:function(t){if(t){var e=/^[a-zA-Z0-9_]+$/;return!!e.test(t)}return!0},checkEmail:function(t){if(t){var e=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;return!!e.test(t)}return!0},checkMobile:function(t){if(t){var e=/^[1][3,4,5,7,8][0-9]{9}$/;return!!e.test(t)}return!0},Home:function(){this.$router.push({name:"Home"})},perCenter:function(){this.$router.push({name:"PersonalCenter"})},back:function(){this.$store.commit("active",0),history.back(-1)}}},l=c,u=(a("6b5f"),a("2877")),m=Object(u["a"])(l,n,o,!1,null,"fb2f2a90",null);e["default"]=m.exports},fb6a:function(t,e,a){"use strict";var n=a("23e7"),o=a("861d"),i=a("e8b5"),r=a("23cb"),s=a("50c4"),c=a("fc6a"),l=a("8418"),u=a("b622"),m=a("1dde"),f=a("ae40"),d=m("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),b=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!d||!p},{slice:function(t,e){var a,n,u,m=c(this),f=s(m.length),d=r(t,f),p=r(void 0===e?f:e,f);if(i(m)&&(a=m.constructor,"function"!=typeof a||a!==Array&&!i(a.prototype)?o(a)&&(a=a[v],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return b.call(m,d,p);for(n=new(void 0===a?Array:a)(h(p-d,0)),u=0;d<p;d++,u++)d in m&&l(n,u,m[d]);return n.length=u,n}})}}]);
//# sourceMappingURL=chunk-291afe3d.08b05e24.js.map