(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1546f096"],{1973:function(t,e,s){},"1bde":function(t,e,s){"use strict";s.r(e);var _=function(){var t=this,e=t.$createElement,_=t._self._c||e;return _("van-row",{staticStyle:{height:"100%"}},[_("van-row",{staticClass:"dt-title",attrs:{type:"flex",align:"center"}},[_("van-col",{attrs:{span:"2"}},[_("van-icon",{staticClass:"dt-back",attrs:{name:"arrow-left"},on:{click:t.back}})],1),_("van-col",{attrs:{span:"20"}},[_("p",{staticClass:"dt-home-shouye"},[t._v("工单处理")])])],1),_("van-row",{staticClass:"dt-content"},[_("van-row",{staticClass:"dt-table"},[_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title"},[t._v("工单编号：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.SecunityCode))])],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title"},[t._v("提交人：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.Creater))])],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title"},[t._v("提交时间：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t._f("filteDate")(t.form.CreateTime)))])],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title"},[t._v("当前处理人：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.ChargeUserName))])],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title"},[t._v("工单类型：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.allType[t.form.SecunityType]))])],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title"},[t._v("工单状态：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t._f("filteOrderTStatus")(t.form.SecunityStatus)))])],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title"},[t._v("工单内容：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.SecunityContent))])],1),_("van-row",{directives:[{name:"show",rawName:"v-show",value:t.isStore,expression:"isStore"}],staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[t._v("订单编号：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.OrderNo))])],1),_("van-row",{directives:[{name:"show",rawName:"v-show",value:t.isStore,expression:"isStore"}],staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[t._v("订单金额：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.OrderMoney))])],1),_("van-row",{directives:[{name:"show",rawName:"v-show",value:t.isStore,expression:"isStore"}],staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[t._v("订单商品：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.OrderGoods))])],1),_("van-row",{directives:[{name:"show",rawName:"v-show",value:t.isStore,expression:"isStore"}],staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[t._v("物流公司：")]),_("span",{staticClass:"dt-item-content"},[t._v(t._s(t.form.LogisticsCompany))])],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title-pic"},[t._v("图片：")])],1),_("van-row",{staticClass:"dt-pic",attrs:{gutter:"10"}},[_("van-uploader",{attrs:{deletable:!1},model:{value:t.newImgList,callback:function(e){t.newImgList=e},expression:"newImgList"}})],1),_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[_("span",{staticStyle:{color:"red"}},[t._v("* ")]),t._v("完成说明：")])],1),_("van-row",[_("van-field",{staticClass:"dt-input",staticStyle:{width:"299px","margin-left":"30px"},attrs:{rows:"3",autosize:"",type:"textarea",maxlength:"50",placeholder:"请输入完成说明","show-word-limit":""},model:{value:t.form.CahrgeContent,callback:function(e){t.$set(t.form,"CahrgeContent",e)},expression:"form.CahrgeContent"}})],1),_("van-row",[_("van-row",{staticClass:"dt-top"},[_("van-col",{staticClass:"dt-item-title-pic"},[t._v("上传图片：")])],1),_("div",{staticClass:"dt-upImg-box",staticStyle:{"text-align":"left"}},[_("van-uploader",{attrs:{"before-read":t.upImgBefore,"after-read":t.upImgAfter,"before-delete":t.deleteImg,"max-count":9,multiple:"","upload-icon":s("ffb7")},model:{value:t.upImgList,callback:function(e){t.upImgList=e},expression:"upImgList"}})],1)],1)],1),_("van-row",{staticClass:"dt-button-box"},[_("van-col",{staticClass:"dt-button",attrs:{span:6}},[_("van-row",[_("van-image",{staticClass:"dt-checkPlanPic",attrs:{width:"19.5",height:"20.5",src:s("8dc6")},on:{click:t.detailsPlan}})],1),_("van-row",[_("div",{staticClass:"dt-checkPlanFont",on:{click:t.detailsPlan}},[t._v("查看预案")])])],1),_("van-col",{staticClass:"dt-button",attrs:{span:8}},[_("van-button",{staticStyle:{width:"99.5px",height:"40.5px","border-color":"#5870F8"},attrs:{round:""},on:{click:t.cancel}},[t._v("取消")])],1),_("van-col",{staticClass:"dt-button",attrs:{span:8}},[_("van-button",{staticStyle:{width:"99.5px",height:"40.5px"},attrs:{round:"",color:"#5870F8"},on:{click:t.confirm}},[t._v("确定")])],1)],1)],1)],1)},a=[],o=s("e486"),i=o["a"],r=(s("acd4"),s("2877")),n=Object(r["a"])(i,_,a,!1,null,"ef40b1dc",null);e["default"]=n.exports},"8dc6":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACcAAAApCAYAAAC2qTBFAAAExElEQVRYR+2Yf2wTZRjHv89d17sytoEwBpIFNRqN/uGPhCDGICGZBglmoF27JQoaEmHJdjfZP0qyRd2fIO02RSXBGGRr16xEgjEB/zAxRBIDMUYnEcGgc9lmRsZ+tHfd7h5zXVuabq1lvc5/uL+2933e5/n0+77v8zx3hLRntzq9ThIdFeljxf7bZDZNbWIo9NGaqcxYZA3UK1NVJjn6CNhSbJgs/mMAdwR8rvfT5+NwXjX6LUDP/U9gqbCmyXv7Ol2fJwfIUo3JMZwcYMYUiGaXENRFYGkuHn0f8EnPpODcivawSLhiDTCgB32yvIRg8Cp6A4hPxWMyhgJ+ef1t5Q7qj7DBvyYmtYBfdi0lnKc54iVB6E3EHw745XV34fLZgYKU86qxvQyjAxBK8wmW3YZB4N9jM3gl/KHrRtKuMDhFuw7C/YWBpa/mtvR8VihcGIRddsAxgwmoDfjlM7Yot72JpXJR38agRC5aPCZh9s+gr/RyuoeClFs8Sn4r78Llp9N8q4KU86rR+xjCPoALTCXx8nTNHJKOhUJk2HIhvKp+EeBNi1Umcx0x9vf65U9sgtN+BvCYXXAmo7XPLx+xB06JbAKohanwVCJAuOFwlBw6eZimbYGzS7FsfuqaI3WCIAQTXclgwC9XF70rcTeOLndIFS8azBuJaRXAURCuiOCvenyu60kA672lhMXLRFjLLBwJ+p2tRYNzu1l0rI8dNIG3CbxiAcVMAGHMGkqgu3TImne3sMuYja4Kdy0bTLenehubze1NV6UKsbofwI7/Pg48MsPG8/3+5T9ls7UVzqNqxwnYlwwWL/TEl5gxQGRtLbYCSM+XgwZJj4eO0s2FAG2Dq1dnNjOMC9ZbSiLQb4YpNIQ6nZeSgWtVXiFD6wTo1RQMoTtwVG4qKpxXiZ4CUcNcEBqLGcYTmWcolT5UrZ+A3Yn/p2+OjVedO7k2lV5svxAeNTpKoErLMTO3B/2u97KdJXeL9qDIuJqcNyHW9PlKvplXTey4EC+98U/ZsvKyidRZE4TNwQ+cF3NdCq+qXQPwQFxnFvb3+p2pkmarcg0HeKUp6alDbUB4MuRz/pgLzqNovxDh0bjSQGPQJx8rinIAk1eNTSY7Fwa/GfS5Ps0Gt+PA+MoySR4BUBKHM6k22Cl9WSQ4wKto50ComTtzGJgw/3rq666H9IUAPS36u8TcFp9jGLou3Xv6YxotGlydqtcL4J60HBd2lkivpRd5a87THH2diI6DICZ+yNmgX95Z1FSCdhY849oFIno6BQj8TaAvmM0BEK0mxi4Qnk0HYdDLQZ8ULi6c9SntrUg1TOE7ABtyXYaMuRHDoG2hLmmgaNuadBz/OgrxMwZeyArIPIa5cpZ8FgS0rXxlgtQpM1sIRgMRNjJjNQERJgzA5LMTLPeUi7FWAnfkAiwaXD7b6lH1Q7kAyXq7AuiPxM1hsPkOBEHLx/k8GxOGYNL53m4p/jEynycXIG1tZ0fVLW2EQPfk4ywPm1uRicnqMycqJ/OwjZtkAjLzsDkkb4i3N3XN0T2CQCcACPk6zGUXM8zqbB1JtnWZgCRKlcneC/WKVmMS7SHwGr7dk90RKwFWC34+4JMP39HChLFH0RoJ2AmiHwI+qe1flmU85XZnA6QAAAAASUVORK5CYII="},acd4:function(t,e,s){"use strict";s("1973")},e486:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a434"),core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_splice__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_4__),E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("ade3"),_api_upFile__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("72e0"),_api_workOrder__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("663e"),_api_dimension__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("21cd"),compressorjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("7c8d"),compressorjs__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(compressorjs__WEBPACK_IMPORTED_MODULE_9__);__webpack_exports__["a"]={components:{},data:function(){var t;return{form:(t={ID:"",OrganizationId:"",SecunityCode:"",SecunityContent:"",SecunityType:null,SecunityStatus:null,longitude:"",latitude:"",Address:"",SecunityBussId:"",ChargeUserID:"",ChargeUserName:"",ChargeDeptMent:"",ChargeDuty:"",ChargeLinkPhone:"",CahrgeContent:"",OperatorUserId:"",OperatorUserName:"",OperationTime:"",OperatorLinkOhone:"",OrderNo:"",OrderMoney:"",EventTime:"",LinkPhone:"",UserNmae:"",Creater:"",CreateTime:"",Modifier:"",ModifyTime:"",Validity:1},Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["a"])(t,"OrderNo",""),Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["a"])(t,"OrderMoney",""),Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["a"])(t,"OrderGoods",""),Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_5__["a"])(t,"LogisticsCompany",""),t),upImgList:[],newImgList:[],allType:{},pictureList:[],isStore:!1}},filters:{filteDate:function(t){if(console.log("过滤器",t),t)return t.replace("T"," ")},filteOrderTStatus:function(t){var e={1:"待处理",2:"已办理",3:"已指派"};return e[t]}},computed:{},watch:{},created:function(){this.upImgList=this.$store.state.upImgList,this.pictureList=this.$store.state.pictureList},mounted:function(){this.getTypeInfos()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getworkOrderList:function(){var t=this;Object(_api_workOrder__WEBPACK_IMPORTED_MODULE_7__["c"])({ID:this.$route.query.ID}).then((function(e){t.form=e.Data.ContentList[0],t.form.CahrgeContent=t.$store.state.CahrgeContent,t.getImgList(),6==t.form.SecunityType?t.isStore=!0:t.isStore=!1}))},getImgList:function(){var t=this,e={};e="0"==this.form.SecunityBussId?{AssocID:this.form.ID,PageIndex:1,PageSize:20}:{AssocID:this.form.SecunityBussId,PageIndex:1,PageSize:20},Object(_api_upFile__WEBPACK_IMPORTED_MODULE_6__["b"])(e).then((function(e){var s=e.Data.FileList;s.forEach((function(e){"待处理"==e.AssocSubModule&&t.newImgList.push({url:e.DownloadPath,isImage:!0})}))}))},updateData:function(){var t=this;this.form.SecunityStatus=2,this.form.Modifier=JSON.parse(localStorage.getItem("userInfo")).real_name,this.form.ModifyTime=new Date,Object(_api_workOrder__WEBPACK_IMPORTED_MODULE_7__["d"])(this.form).then((function(e){1==t.$route.query.modelType?t.$router.push({name:"MOOrderHead",query:{active:1}}):2==t.$route.query.modelType?t.$router.push({name:"OMOrderHead"}):t.$router.push({name:"Home"})}))},getTypeInfos:function getTypeInfos(){var _this4=this,info={SysCode:"ProjectSecunityService",Key:"SecunityType"};Object(_api_dimension__WEBPACK_IMPORTED_MODULE_8__["a"])(info).then((function(response){var type=eval(response.Data.UValue);type.forEach((function(t){_this4.allType[t.ItemValue]=t.Description})),_this4.getworkOrderList()}))},upImgBefore:function(t){if(t.type){if("image/jpeg"!=t.type&&"image/png"!=t.type)return!1}else for(var e in t)if("image/jpeg"!=t[e].type&&"image/png"!=t[e].type)return!1;return!0},upImgAfter:function(t){console.log("图片上传后",t);var e=this;if(t instanceof Array)t.forEach((function(t){var s=t.file;new compressorjs__WEBPACK_IMPORTED_MODULE_9___default.a(s,{quality:.5,success:function(t){console.log("压缩成功",t),e.requestUpImg(t)},error:function(t){console.log(t.message)}})}));else{var s=t.file;new compressorjs__WEBPACK_IMPORTED_MODULE_9___default.a(s,{quality:.5,success:function(t){console.log("压缩成功",t),e.requestUpImg(t)},error:function(t){console.log(t.message)}})}},requestUpImg:function(t){var e=this;console.log("发送图片上传请求",t);var s={assocID:this.form.ID,module:this.form.SecunityType,submodule:"完结",Uploader:this.form.OperatorUserName,file:t};"0"!==this.form.SecunityBussId&&(s.assocID=this.form.SecunityBussId),s=this.objToFormData(s),Object(_api_upFile__WEBPACK_IMPORTED_MODULE_6__["c"])(s).then((function(t){e.pictureList.push({DownloadPath:t.Data[0].DownloadPath,FileID:t.Data[0].FileID})}))},objToFormData:function(t){var e=new FormData;for(var s in t)e.append(s,t[s]);return e},deleteImg:function(t,e){var s=this.pictureList.splice(e.index,1),_=[s[0].FileID];return Object(_api_upFile__WEBPACK_IMPORTED_MODULE_6__["a"])(_).then((function(t){console.log("图片删除返回",t)})),!0},confirm:function(){var t=this;this.panduan()?this.$dialog.confirm({title:"标题",message:"是否处理工单？"}).then((function(){t.updateData()})).catch((function(){})):this.$toast("完成说明、上传图片，不同时为空 ")},cancel:function(){var t=this;this.$dialog.confirm({title:"标题",message:"是否放弃处理工单？"}).then((function(){t.pictureList.forEach((function(t){var e=[t.FileID];Object(_api_upFile__WEBPACK_IMPORTED_MODULE_6__["a"])(e).then((function(t){console.log("图片删除返回",t)}))})),t.$store.commit("upImgList",[]),t.$store.commit("pictureList",[]),t.$store.commit("CahrgeContent",""),t.$router.go(-1)})).catch((function(){}))},panduan:function(){return!!(this.form.CahrgeContent||this.upImgList.length>=1)},detailsPlan:function(){this.$store.commit("upImgList",this.upImgList),this.$store.commit("pictureList",this.pictureList),this.$store.commit("CahrgeContent",this.form.CahrgeContent),this.$router.push({name:"DetailsOfPlanInformation",query:{secunityType:this.allType[this.form.SecunityType],come:"orderProcessing"}})},back:function(){this.$store.commit("active",0),history.back(-1)}}}}}]);
//# sourceMappingURL=chunk-1546f096.6a56fa4c.js.map