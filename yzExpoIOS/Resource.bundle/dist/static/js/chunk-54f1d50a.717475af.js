(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-54f1d50a"],{1229:function(t,e,o){},b0c0:function(t,e,o){var n=o("83ab"),a=o("9bf2").f,c=Function.prototype,i=c.toString,r=/^\s*function ([^ (]*)/,s="name";n&&!(s in c)&&a(c,s,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},b254:function(t,e,o){"use strict";o.r(e);var n,a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("van-row",[t._v(" 人脸识别 "),o("video",{attrs:{src:""}}),o("div",{staticStyle:{"margin-top":"50px"}},[o("button",{on:{click:t.takePicture}},[t._v("开始识别")])]),o("div",{staticStyle:{"margin-top":"50px"}},[o("button",{on:{click:t.toLogin}},[t._v("使用账号密码登录")])]),o("div",{staticStyle:{"margin-top":"100px"}},[o("button",{on:{click:t.toHome}},[t._v("进入首页")])])])},c=[],i=(o("b0c0"),o("ac1f"),o("5319"),o("37a2")),r=o("fa20"),s={components:{},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){this.openCamera()},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{toHome:function(){Object(r["e"])(),this.$store.commit("bottomNav",0),this.$router.replace({name:"Home"})},toLogin:function(){var t=this;this.$dialog.confirm({message:"是否放弃人脸识别"}).then((function(){localStorage.removeItem("userInfo"),t.$router.replace({name:"Login"})})).catch((function(){}))},takePicture:function(){var t=this,e=this.getBase64(),o={GroupIds:["yzExpo-App"],Image:e};Object(i["d"])(o).then((function(e){console.log("responseresponseresponse",e);var o=e.data.score,n=e.data.uid,a=JSON.parse(localStorage.getItem("userInfo")).uid;console.log("score",o,"uid",n,"localUid",a),o>60?(console.log("相似度匹配成功"),n===a?(console.log("uid一样"),Object(r["e"])(),t.$store.commit("bottomNav",0),t.$router.replace({name:"Home"})):(console.log("uid不一样"),t.$toast({message:"人脸检测失败，请重试",position:"top"}))):(console.log("不在人脸库"),t.$toast({message:"人脸检测失败，请重试",position:"top"}))})).catch((function(e){console.log("错误没有检测到人脸",e),t.$toast({message:"人脸检测失败，请重试",position:"top"})}))},openCamera:function(){var t={video:{width:320,height:320,facingMode:"user"}};navigator.mediaDevices.getUserMedia(t).then((function(t){n=document.querySelector("video"),n.srcObject=t,n.onloadedmetadata=function(t){n.play()}})).catch((function(t){console.log(t.name+": "+t.message)}))},getBase64:function(){var t=document.createElement("canvas");t.width=n.videoWidth,t.height=n.videoHeight,t.getContext("2d").drawImage(n,0,0,t.width,t.height);var e=t.toDataURL("image/png").replace("image/png","image/octet-stream");return e}}},u=s,d=(o("ed09"),o("2877")),l=Object(d["a"])(u,a,c,!1,null,"11d8ad72",null);e["default"]=l.exports},ed09:function(t,e,o){"use strict";o("1229")}}]);
//# sourceMappingURL=chunk-54f1d50a.717475af.js.map