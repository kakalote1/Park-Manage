(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-675a96b8"],{"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("25f0"),r("3ca3");var a=r("6b75");function o(e,t){if(e){if("string"===typeof e)return Object(a["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(a["a"])(e,t):void 0}}},"12eb":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("b0c0"),core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_function_name__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("ac1f"),core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_regexp_exec__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5319"),core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_string_replace__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_5__),E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("5530"),E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2909"),_api_workOrder__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("663e"),_api_userApi__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("37a2"),_api_dimension__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("21cd"),_api_upFile__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("72e0"),_utils_order__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("273d");__webpack_exports__["a"]={components:{},data:function(){return{order:{},redeployData:{TransferUserID:"",TransferUserName:"",TransferLinkPhone:""},redeployShowPicker:!1,peoples:[],peopleNames:[],peopleobj:{},allType:{},newImgList:[],isStore:!1,historyList:[]}},filters:{filteDate:function(e){if(e)return e.replace("T"," ")},filteOrderTStatus:function(e){var t={1:"待处理",2:"已办理",3:"已指派"};return t[e]}},computed:{},watch:{},created:function(){},mounted:function(){this.getTypeInfos(),this.getParentList(),this.$toast.loading({message:"正在加载",forbidClick:!0,duration:1e3})},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{getParentList:function(){var e=this;Object(_api_userApi__WEBPACK_IMPORTED_MODULE_9__["f"])().then((function(t){var r=t.data.tree[0].children;for(var a in r){var o=r[a].name,n=r[a].id;e.peoples.push({id:n,text:o})}var _=function(t){var a=r[t].id;Object(_api_userApi__WEBPACK_IMPORTED_MODULE_9__["g"])({id:a}).then((function(t){var r=[];for(var o in t.data.list){var n=t.data.list[o].real_name,_=t.data.list[o].uid,s={uid:_,text:n};r.push(s),e.peopleobj[n]=t.data.list[o]}for(var i in e.peoples){var c=e.peoples[i].id;c===a&&(e.peoples[i].children=r)}}))};for(var s in r)_(s)}))},getworkOrderList:function(){var e=this;Object(_api_workOrder__WEBPACK_IMPORTED_MODULE_8__["c"])({ID:this.$route.query.ID}).then((function(t){e.order=t.Data.ContentList[0],e.getImgList(),Object(_utils_order__WEBPACK_IMPORTED_MODULE_12__["a"])(e.order.SecunityBussId,(function(t){t.length?e.historyList=t:(e.historyList.push({date:e.order.CreateTime,content:"".concat(e.order.Creater,"创建了工单")}),e.historyList=[].concat(Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__["a"])(e.historyList),Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_7__["a"])(t)))})),6==e.order.SecunityType?e.isStore=!0:e.isStore=!1}))},getImgList:function(){var e=this,t={};t="0"==this.order.SecunityBussId?{AssocID:this.order.ID,PageIndex:1,PageSize:20}:{AssocID:this.order.SecunityBussId,PageIndex:1,PageSize:20},Object(_api_upFile__WEBPACK_IMPORTED_MODULE_11__["b"])(t).then((function(t){var r=t.Data.FileList;r.forEach((function(t){"待处理"==t.AssocSubModule&&e.newImgList.push({url:t.DownloadPath,isImage:!0})}))}))},getTypeInfos:function getTypeInfos(){var _this4=this,info={SysCode:"ProjectSecunityService",Key:"SecunityType"};Object(_api_dimension__WEBPACK_IMPORTED_MODULE_10__["a"])(info).then((function(response){var type=eval(response.Data.UValue);type.forEach((function(e){_this4.allType[e.ItemValue]=e.Description})),_this4.getworkOrderList()}))},Home:function(){this.$router.push({name:"Home"})},process:function(){this.$router.push({name:"OrderOrderProcessing",query:{ID:this.$route.query.ID,modelType:this.$route.query.modelType}})},onConfirm:function(e){if(e[e.length-1]!=JSON.parse(localStorage.getItem("userInfo")).real_name){var t=this.peopleobj[e[e.length-1]];this.redeployData.TransferUserID=t.uid,this.redeployData.TransferUserName=t.real_name,this.redeployData.TransferLinkPhone=t.mobile,this.redeployShowPicker=!1,this.redeployConfirm()}else this.$toast({message:"不能转派给自己",position:"top"})},redeployConfirm:function(){var e=this;this.$dialog.confirm({title:"标题",message:"确认转派吗？"}).then((function(){e.order.SecunityStatus=3,e.order.Modifier=JSON.parse(localStorage.getItem("userInfo")).real_name,e.order.ModifyTime=new Date,Object(_api_workOrder__WEBPACK_IMPORTED_MODULE_8__["d"])(Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__["a"])(Object(E_detaProject_yzExpoWeb_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_6__["a"])({},e.order),e.redeployData)).then((function(t){1==e.$route.query.modelType?e.$router.push({name:"MOOrderHead"}):2==e.$route.query.modelType?e.$router.push({name:"OMOrderHead"}):e.$router.push({name:"Home"})}))})).catch((function(){}))},redeployCancel:function(){this.redeployShow=!1},back:function(){this.$store.commit("active",0),history.back(-1)}}}},"21cd":function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var a=r("a27e"),o=r("a139");function n(e){return Object(a["a"])({url:o["b"]+"/msapi/v1.0/BaseDataService/UniformConfig/GetDataBySearch",method:"post",data:e})}},"273d":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("99af"),r("4160"),r("159b");var a=r("663e");function o(e,t){var r=[],o="";if("0"!==e){var n={ID:e};Object(a["b"])(n).then((function(e){console.log("历史返回",e),e.Data.forEach((function(e){r.push({date:e.OperationTime,content:"".concat(e.OperatorUserName,"转派给了").concat(e.ChargeUserName)}),2==e.SecunityStatus&&(r.push({date:e.ModifyTime,content:"".concat(e.Modifier,"处理了工单")}),o=e.CahrgeContent)})),"function"==typeof t&&t(r.reverse(),o)}))}else"function"==typeof t&&t(r,o)}},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("6b75");function o(e){if(Array.isArray(e))return Object(a["a"])(e)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function n(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var _=r("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e){return o(e)||n(e)||Object(_["a"])(e)||s()}},"3ca3":function(e,t,r){"use strict";var a=r("6547").charAt,o=r("69f3"),n=r("7dd0"),_="String Iterator",s=o.set,i=o.getterFor(_);n(String,"String",(function(e){s(this,{type:_,string:String(e),index:0})}),(function(){var e,t=i(this),r=t.string,o=t.index;return o>=r.length?{value:void 0,done:!0}:(e=a(r,o),t.index+=e.length,{value:e,done:!1})}))},"4df4":function(e,t,r){"use strict";var a=r("0366"),o=r("7b0b"),n=r("9bdd"),_=r("e95a"),s=r("50c4"),i=r("8418"),c=r("35a1");e.exports=function(e){var t,r,u,l,d,p,f=o(e),v="function"==typeof this?this:Array,m=arguments.length,b=m>1?arguments[1]:void 0,h=void 0!==b,y=c(f),E=0;if(h&&(b=a(b,m>2?arguments[2]:void 0,2)),void 0==y||v==Array&&_(y))for(t=s(f.length),r=new v(t);t>E;E++)p=h?b(f[E],E):f[E],i(r,E,p);else for(l=y.call(f),d=l.next,r=new v;!(u=d.call(l)).done;E++)p=h?n(l,b,[u.value,E],!0):u.value,i(r,E,p);return r.length=E,r}},5011:function(e,t,r){"use strict";r("8d47")},"6b75":function(e,t,r){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"a",(function(){return a}))},"72e0":function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"b",(function(){return _})),r.d(t,"a",(function(){return s}));var a=r("a27e"),o=r("a139");function n(e){return Object(a["a"])({url:o["b"]+"/msapi/v1.0/FileService/File/Upload",method:"post",data:e})}function _(e){return Object(a["a"])({url:o["b"]+"/msapi/v1.0/FileService/File/GetFileList",method:"post",data:e})}function s(e){return Object(a["a"])({url:o["b"]+"/msapi/v1.0/FileService/File/DeleteFile",method:"post",data:e})}},8134:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-row",{staticStyle:{height:"100%"}},[r("van-row",{staticClass:"dt-title",attrs:{type:"flex",align:"center"}},[r("van-col",{attrs:{span:"2"}},[r("van-icon",{staticClass:"dt-back",attrs:{name:"arrow-left"},on:{click:e.back}})],1),r("van-col",{attrs:{span:"20"}},[r("p",{staticClass:"dt-home-shouye"},[e._v("待办工单详情")])])],1),r("van-row",{staticClass:"dt-content"},[r("van-row",{staticClass:"dt-table"},[r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("工单编号：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.SecunityCode))])],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("提交人：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.Creater))])],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("提交时间：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e._f("filteDate")(e.order.CreateTime)))])],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("当前处理人：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.ChargeUserName))])],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("工单类型：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.allType[e.order.SecunityType]))])],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("工单状态：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e._f("filteOrderTStatus")(e.order.SecunityStatus)))])],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("工单内容：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.SecunityContent))])],1),r("van-row",{directives:[{name:"show",rawName:"v-show",value:e.isStore,expression:"isStore"}],staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("订单编号：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.OrderNo))])],1),r("van-row",{directives:[{name:"show",rawName:"v-show",value:e.isStore,expression:"isStore"}],staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("订单金额：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.OrderMoney))])],1),r("van-row",{directives:[{name:"show",rawName:"v-show",value:e.isStore,expression:"isStore"}],staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("订单商品：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.OrderGoods))])],1),r("van-row",{directives:[{name:"show",rawName:"v-show",value:e.isStore,expression:"isStore"}],staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("物流公司：")]),r("span",{staticClass:"dt-item-content"},[e._v(e._s(e.order.LogisticsCompany))])],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title"},[e._v("图片：")])],1),r("van-row",{staticClass:"dt-pic",attrs:{gutter:"10"}},[r("van-uploader",{attrs:{deletable:!1},model:{value:e.newImgList,callback:function(t){e.newImgList=t},expression:"newImgList"}})],1),r("van-row",{staticClass:"dt-top"},[r("van-col",{staticClass:"dt-item-title",attrs:{span:8}},[e._v("处理历史：")])],1),r("van-row",{staticClass:"dt-steps"},[r("van-steps",{attrs:{direction:"vertical",active:0}},e._l(this.historyList,(function(t){return r("van-step",{key:t},[r("h3",[e._v(e._s(t.content))]),r("p",[e._v(e._s(e._f("filteDate")(t.date)))])])})),1)],1)],1),r("van-row"),r("van-row",{attrs:{type:"flex",justify:"space-around"}},[r("van-col",{staticClass:"dt-button",attrs:{span:12}},[r("van-button",{staticStyle:{width:"100px"},attrs:{round:"",type:"info"},on:{click:e.process}},[e._v("处理")])],1),r("van-col",{staticClass:"dt-button",attrs:{span:12}},[r("van-button",{staticStyle:{width:"100px"},attrs:{round:"",type:"info"},on:{click:function(t){e.redeployShowPicker=!0}}},[e._v("转派")])],1)],1),r("van-row",[r("van-popup",{attrs:{round:"",position:"bottom"},model:{value:e.redeployShowPicker,callback:function(t){e.redeployShowPicker=t},expression:"redeployShowPicker"}},[r("van-picker",{attrs:{"show-toolbar":"",columns:e.peoples,title:"转派给"},on:{cancel:function(t){e.redeployShowPicker=!1},confirm:e.onConfirm}})],1)],1)],1)],1)},o=[],n=r("12eb"),_=n["a"],s=(r("5011"),r("2877")),i=Object(s["a"])(_,a,o,!1,null,"dbcfd138",null);t["default"]=i.exports},"8d47":function(e,t,r){},"99af":function(e,t,r){"use strict";var a=r("23e7"),o=r("d039"),n=r("e8b5"),_=r("861d"),s=r("7b0b"),i=r("50c4"),c=r("8418"),u=r("65f0"),l=r("1dde"),d=r("b622"),p=r("2d00"),f=d("isConcatSpreadable"),v=9007199254740991,m="Maximum allowed index exceeded",b=p>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),h=l("concat"),y=function(e){if(!_(e))return!1;var t=e[f];return void 0!==t?!!t:n(e)},E=!b||!h;a({target:"Array",proto:!0,forced:E},{concat:function(e){var t,r,a,o,n,_=s(this),l=u(_,0),d=0;for(t=-1,a=arguments.length;t<a;t++)if(n=-1===t?_:arguments[t],y(n)){if(o=i(n.length),d+o>v)throw TypeError(m);for(r=0;r<o;r++,d++)r in n&&c(l,d,n[r])}else{if(d>=v)throw TypeError(m);c(l,d++,n)}return l.length=d,l}})},"9bdd":function(e,t,r){var a=r("825a"),o=r("2a62");e.exports=function(e,t,r,n){try{return n?t(a(r)[0],r[1]):t(r)}catch(_){throw o(e),_}}},a630:function(e,t,r){var a=r("23e7"),o=r("4df4"),n=r("1c7e"),_=!n((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:_},{from:o})},b0c0:function(e,t,r){var a=r("83ab"),o=r("9bf2").f,n=Function.prototype,_=n.toString,s=/^\s*function ([^ (]*)/,i="name";a&&!(i in n)&&o(n,i,{configurable:!0,get:function(){try{return _.call(this).match(s)[1]}catch(e){return""}}})},d28b:function(e,t,r){var a=r("746f");a("iterator")},e01a:function(e,t,r){"use strict";var a=r("23e7"),o=r("83ab"),n=r("da84"),_=r("5135"),s=r("861d"),i=r("9bf2").f,c=r("e893"),u=n.Symbol;if(o&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var l={},d=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof d?new u(e):void 0===e?u():u(e);return""===e&&(l[t]=!0),t};c(d,u);var p=d.prototype=u.prototype;p.constructor=d;var f=p.toString,v="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;i(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=f.call(e);if(_(l,e))return"";var r=v?t.slice(7,-1):t.replace(m,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:d})}},fb6a:function(e,t,r){"use strict";var a=r("23e7"),o=r("861d"),n=r("e8b5"),_=r("23cb"),s=r("50c4"),i=r("fc6a"),c=r("8418"),u=r("b622"),l=r("1dde"),d=r("ae40"),p=l("slice"),f=d("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),m=[].slice,b=Math.max;a({target:"Array",proto:!0,forced:!p||!f},{slice:function(e,t){var r,a,u,l=i(this),d=s(l.length),p=_(e,d),f=_(void 0===t?d:t,d);if(n(l)&&(r=l.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?o(r)&&(r=r[v],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return m.call(l,p,f);for(a=new(void 0===r?Array:r)(b(f-p,0)),u=0;p<f;p++,u++)p in l&&c(a,u,l[p]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-675a96b8.4978d25e.js.map