(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-304aef1f"],{"0834":function(t,e,a){"use strict";a("17c7")},"17c7":function(t,e,a){},4754:function(t,e,a){t.exports=a.p+"static/img/通讯录消息.f9d2a3ce.png"},"5d41":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.sizeClass},[t._v(t._s(t._f("filtName")(t.username)))])},n=[],o=(a("fb6a"),{components:{},props:["username","size"],filters:{filtName:function(t){return t?t.length>2?t.slice(t.length-2,t.length):t:"员工"}},data:function(){return{sizeClass:""}},computed:{},watch:{},created:function(){"large"==this.size?this.sizeClass="dt-headPortrait-large":(this.size,this.sizeClass="dt-headPortrait-small")},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}}),s=o,r=(a("0834"),a("2877")),c=Object(r["a"])(s,i,n,!1,null,"1031c22d",null);e["a"]=c.exports},"68e7":function(t,e,a){"use strict";a("7e5b")},"71b3":function(t,e){t.exports="data:image/png;base64,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"},"7e5b":function(t,e,a){},"907a":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dt-table"},[a("van-row",{staticClass:"dt-tab-row dt-tab-rowOne"},[a("div",{staticClass:"dt-item-title"},[t._v("头像")]),a("div",{staticClass:"dt-headPortrait"},[a("headPortrait",{attrs:{size:"small",username:t.information.real_name}})],1)]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("姓名")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.real_name))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("用户名")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.username))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("部门")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.department))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("手机号码")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.mobile))])]),a("van-row",{staticClass:"dt-tab-row"},[a("div",{staticClass:"dt-item-title"},[t._v("电子邮箱")]),a("div",{staticClass:"dt-item-content"},[t._v(t._s(t.information.email))])])],1)},n=[],o=a("5d41"),s={components:{headPortrait:o["a"]},props:["information","department"],data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},r=s,c=(a("ac6a"),a("2877")),d=Object(c["a"])(r,i,n,!1,null,"f7a0d05a",null);e["a"]=d.exports},a59a:function(t,e,a){t.exports=a.p+"static/img/通讯录语音.bd79db80.png"},ac6a:function(t,e,a){"use strict";a("bbda")},b0c0:function(t,e,a){var i=a("83ab"),n=a("9bf2").f,o=Function.prototype,s=o.toString,r=/^\s*function ([^ (]*)/,c="name";i&&!(c in o)&&n(o,c,{configurable:!0,get:function(){try{return s.call(this).match(r)[1]}catch(t){return""}}})},b9f1:function(t,e,a){"use strict";a.d(e,"a",(function(){return o})),a.d(e,"b",(function(){return s}));var i=a("a27e"),n=a("b5a0");function o(t){return Object(i["a"])({url:n["a"]+"/scooper-core-rest/data/contacts/orgDeptManage/listTreeDeptByParent",method:"GET",params:t})}function s(t){return Object(i["a"])({url:n["a"]+"/scooper-core-rest/data/contacts/orgMemberManage/listOrgMember",method:"GET",params:t})}},bbda:function(t,e,a){},db46:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("van-row",{staticClass:"dt-chat"},[i("van-row",{staticClass:"dt-title",attrs:{type:"flex",align:"center"}},[i("van-col",{attrs:{span:"2"}}),i("van-col",{attrs:{span:"20"}},[i("p",{staticClass:"dt-chat-name"},[t._v("通讯录")])])],1),i("van-row",{staticClass:"dt-content"},[i("el-tree",{attrs:{props:t.props,load:t.loadNode,lazy:""},on:{"node-click":t.touchUser},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return i("div",{staticClass:"custom-tree-node"},["orgMember"===a.dataType?i("div",{staticStyle:{display:"inline-block"}},[i("headPortrait",{attrs:{size:"small",username:a.name}})],1):t._e(),i("div",{staticStyle:{display:"inline-block","margin-left":"7px"}},[t._v(t._s(a.name))])])}}])})],1),i("van-popup",{staticClass:"dt-pop",attrs:{position:"top"},on:{close:t.closePop},model:{value:t.showPop,callback:function(e){t.showPop=e},expression:"showPop"}},[i("userInformation",{attrs:{information:t.information,department:t.department}}),i("div",{staticClass:"dt-tongxun",on:{click:t.seedMessage}},[i("div",{staticClass:"imgIco"},[i("img",{attrs:{src:a("4754")}})]),i("div",{staticClass:"imgText"},[t._v("发消息")])]),i("div",{staticClass:"dt-tongxun",on:{click:t.audioCall}},[i("div",{staticClass:"imgIco"},[i("img",{attrs:{src:a("a59a")}})]),i("div",{staticClass:"imgText"},[t._v("语音通话")])]),i("div",{staticClass:"dt-tongxun",on:{click:t.videoCall}},[i("div",{staticClass:"imgIco"},[i("img",{attrs:{src:a("71b3")}})]),i("div",{staticClass:"imgText"},[t._v("视频通话")])])],1)],1)},n=[],o=(a("4160"),a("fb6a"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),s=a("b9f1"),r=a("37a2"),c=a("5d41"),d=a("907a"),l=a("3089"),u=a("c443"),f="",m={props:["username"],components:{headPortrait:c["a"],userInformation:d["a"]},filters:{filtName:function(t){return t.length>2?t.slice(t.length-2,t.length):t}},data:function(){return{contactList:[],node:{id:0,children:[]},props:{label:"name",children:"zones",isLeaf:this.judgeLeaf},showPop:!1,information:{},department:"",popTel:"",userId:""}},computed:{},watch:{},created:function(){f=this,this.$store.commit("bottomNav",2)},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{touchUser:function(t){var e=this;if(t.extraDataMap&&(this.popTel=t.extraDataMap.memMsgTel),this.userId=t.id,!t.isParent){var a={uid:JSON.parse(localStorage.getItem("userInfo")).uid,id:t.id};Object(s["b"])(a).then((function(t){var a={};t.data[0].deptExt?a={username:t.data[0].deptExt}:t.data[0].memEmail?a={username:t.data[0].memEmail}:t.data[0].memMobile?a={username:t.data[0].memMobile}:console.error("没有令牌"),Object(r["c"])(a).then((function(t){e.showPop=!0,Object(r["e"])({uid:t.data.uid}).then((function(t){var a=t.data.list;a.length?e.department=a[a.length-1].name:e.department=""})),e.information=t.data}))}))}},closePop:function(){this.information={},this.department="",this.popTel="",this.userId=""},judgeLeaf:function(t){return void 0===t.childNum||0===t.childNum||!(void 0!==t.childNum&&t.childNum>0)&&void 0},loadNode:function(t,e){var a=this;0===t.level&&a.getNodes("0").then((function(t){return e(t.data)})),t.level>0&&a.getNodes(t.data.id).then((function(t){return e(t.data)}))},Home:function(){this.$router.push({name:"Home"})},handleNodeClick:function(t){console.log(t)},getNodes:function(t){var e={id:t,uid:JSON.parse(localStorage.getItem("userInfo")).uid,expandMember:!0};return Object(s["a"])(e)},fetchNodes:function(t){return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a={id:t.id,uid:JSON.parse(localStorage.getItem("userInfo")).uid,expandMember:!0},i=[],!(0===t.id||t.childNum>0)){e.next=5;break}return e.next=5,Object(s["a"])(a).then((function(e){e.data.forEach((function(t){f.fetchNodes(t),i.push(t)})),t.children=i}));case 5:case"end":return e.stop()}}),e)})))()},transformData:function(){this.contactList=this.node.children},audioCall:function(){var t=this;this.$dialog.confirm({message:"是否发起语音通话"}).then((function(){window.android?window.android.voiceChat(t.popTel):window.webkit&&window.webkit.messageHandlers.makeAudioCall.postMessage(t.popTel)})).catch()},videoCall:function(){var t=this;this.$dialog.confirm({message:"是否发起视频通话"}).then((function(){window.android?window.android.videoChat(t.popTel):window.webkit&&window.webkit.messageHandlers.makeVideoCall.postMessage(t.popTel)})).catch()},seedMessage:function(){var t=this,e={uid:JSON.parse(localStorage.getItem("userInfo")).uid,objectId:this.userId};Object(u["b"])(e).then((function(e){if(0===e.code){Object(l["Toast"])("会话创建成功");var a=e.data.id;t.$router.push({name:"MessageChat",query:{id:a}})}else if(1301===e.code)Object(l["Toast"])("不能给自己发起会话");else if(1201===e.code){var i=e.data.id;t.$router.push({name:"MessageChat",query:{id:i}})}else if(1202===e.code){var n=e.data.id;t.$router.push({name:"MessageChat",query:{id:n}})}else Object(l["Toast"])("会话创建失败，请稍后再试")}))}}},p=m,v=(a("68e7"),a("2877")),g=Object(v["a"])(p,i,n,!1,null,"ddf40406",null);e["default"]=g.exports},fb6a:function(t,e,a){"use strict";var i=a("23e7"),n=a("861d"),o=a("e8b5"),s=a("23cb"),r=a("50c4"),c=a("fc6a"),d=a("8418"),l=a("b622"),u=a("1dde"),f=a("ae40"),m=u("slice"),p=f("slice",{ACCESSORS:!0,0:0,1:2}),v=l("species"),g=[].slice,h=Math.max;i({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var a,i,l,u=c(this),f=r(u.length),m=s(t,f),p=s(void 0===e?f:e,f);if(o(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!o(a.prototype)?n(a)&&(a=a[v],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return g.call(u,m,p);for(i=new(void 0===a?Array:a)(h(p-m,0)),l=0;m<p;m++,l++)m in u&&d(i,l,u[m]);return i.length=l,i}})}}]);
//# sourceMappingURL=chunk-304aef1f.59318feb.js.map