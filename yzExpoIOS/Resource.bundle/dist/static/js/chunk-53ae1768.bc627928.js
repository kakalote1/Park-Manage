(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53ae1768"],{"0834":function(e,t,n){"use strict";n("17c7")},"17c7":function(e,t,n){},"1c5f":function(e,t,n){},"1d11":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-row",{staticClass:"dt-message"},[a("van-row",{staticClass:"dt-title",attrs:{type:"flex",align:"center"}},[a("van-col",{attrs:{span:"2"}}),a("van-col",{attrs:{span:"20"}},[a("p",{staticClass:"dt-message-name"},[e._v("消息")])]),a("van-col",{attrs:{span:"2"}},[a("van-popover",{style:{width:"15px"},attrs:{trigger:"click",actions:e.actions,placement:"bottom-end"},on:{select:e.onSelect},scopedSlots:e._u([{key:"reference",fn:function(){return[a("van-image",{staticClass:"dt-more",attrs:{fit:"contain",src:n("7aef")}})]},proxy:!0}]),model:{value:e.showPopover,callback:function(t){e.showPopover=t},expression:"showPopover"}})],1)],1),a("van-row",{staticClass:"dt-message-content"},[a("van-pull-refresh",{staticStyle:{"min-height":"100vh"},attrs:{"success-text":"刷新成功","success-duration":"400"},on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[a("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了",error:e.error,"error-text":"请求失败，点击重新加载"},on:{"update:error":function(t){e.error=t},load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.conversationList,(function(t){return a("van-swipe-cell",{key:t.id,scopedSlots:e._u([{key:"right",fn:function(){return[a("van-button",{attrs:{square:"",type:"danger",text:"删除"},on:{click:function(n){return e.deleteMsg(t)}}})]},proxy:!0}],null,!0)},[a("van-row",{staticClass:"dt-card",on:{click:function(n){return e.handleMessageClick(t.id,t.last_msg_id)}}},[a("messageCard",{attrs:{username:e._f("filtName")(t.name),info:t.content,msgType:t.type,time:e.timeFormat(t.send_time),newMsg:t.unread>0}})],1)],1)})),1)],1)],1)],1)},s=[],i=(n("fb6a"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("van-row",[n("div",{staticClass:"dt-headPortrait"},[e.newMsg?n("van-badge",{staticStyle:{width:"100wh"},attrs:{dot:""}},[e.username.split("、").length>1?n("headPortrait",{attrs:{size:"large",username:"群组"}}):n("headPortrait",{attrs:{size:"large",username:e.username}})],1):n("van-badge",{staticStyle:{width:"100wh"}},[e.username.split("、").length>1?n("headPortrait",{attrs:{size:"large",username:"群组"}}):n("headPortrait",{attrs:{size:"large",username:e.username}})],1)],1),n("div",{staticClass:"dt-information"},[n("van-row",[n("div",{staticClass:"dt-name"},[n("p",{staticClass:"dt-text"},[e._v(e._s(e.username))])]),n("div",{staticClass:"dt-time"},[e._v(e._s(e.time))])]),n("div",{staticClass:"dt-info"},[e._v(e._s(e.info))])],1),n("div",{staticClass:"dt-card-box"})])}),r=[],o=n("5d41"),c={props:["username","info","time","msgType","newMsg"],components:{headPortrait:o["a"]},filters:{},data:function(){return{}},computed:{},watch:{},created:function(){7==this.msgType?this.info="视频消息":1==this.msgType&&(this.info="图片消息")},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}},d=c,u=(n("8da1"),n("2877")),f=Object(u["a"])(d,i,r,!1,null,"996c9db0",null),l=f.exports,h=n("c443"),m={components:{messageCard:l},filters:{filtName:function(e){return e.length>4&&"多人聊天"==e.slice(0,4)?"多人群组":e}},data:function(){return{conversationList:[],error:!1,refreshing:!1,loading:!1,finished:!1,showPopover:!1,actions:[{text:"发起会话",icon:n("e7eb")}]}},computed:{},watch:{},created:function(){this.$store.commit("bottomNav",1)},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{onLoad:function(){var e=this;this.refreshing&&(this.conversationList=[],this.refreshing=!1);var t={};t.uid=JSON.parse(localStorage.getItem("userInfo")).uid,t.pageSize=1e7,Object(h["e"])(t).then((function(t){0===t.code&&(e.conversationList=t.list,e.loading=!1,e.finished=!0)})).catch((function(){e.error=!0}))},onRefresh:function(){this.finished=!1,this.loading=!0,this.onLoad()},deleteMsg:function(e){var t=this,n={uid:JSON.parse(localStorage.getItem("userInfo")).uid,id:e.id};Object(h["i"])(n).then((function(){t.onLoad()}))},timeFormat:function(e){var t;return e?(e=e.replace(new RegExp("-","gm"),"/"),t=(new Date).format("yyyy")==new Date(e).format("yyyy")?(new Date).format("yyyyMMdd")==new Date(e).format("yyyyMMdd")?new Date(e).format("hh:mm"):new Date(e).format("MM-dd"):new Date(e).format("yyyy-MM-dd")):t="",t},handleMessageClick:function(e,t){this.$router.push({name:"MessageChat",query:{id:e,lastId:t}})},onSelect:function(e){"发起会话"==e.text&&this.manyPeople()},manyPeople:function(){this.$router.push({name:"checkAddressBook"})}}},p=m,y=(n("c7ed"),Object(u["a"])(p,a,s,!1,null,"7df2e1e6",null));t["default"]=y.exports},"5d41":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.sizeClass},[e._v(e._s(e._f("filtName")(e.username)))])},s=[],i=(n("fb6a"),{components:{},props:["username","size"],filters:{filtName:function(e){return e?e.length>2?e.slice(e.length-2,e.length):e:"员工"}},data:function(){return{sizeClass:""}},computed:{},watch:{},created:function(){"large"==this.size?this.sizeClass="dt-headPortrait-large":(this.size,this.sizeClass="dt-headPortrait-small")},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){},methods:{}}),r=i,o=(n("0834"),n("2877")),c=Object(o["a"])(r,a,s,!1,null,"1031c22d",null);t["a"]=c.exports},"6b7e":function(e,t,n){},"7aef":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAARCAYAAAA7bUf6AAABvElEQVQ4T53UTYiOYRTG8d+1kq/SSLFBWUhsbCxsMDtJJkksZMPCRykrklKajRQ7+WoSIclGwoLYSDaEyCRFaRYiC+Sjcet+e97p7fWOMk89m3Pf53+ec53rPNHjKaX0YRUWYTo+4DnuJfnenZLOQCllBg5iD15iGN9Q40swEwdwKsmPdu4YpJSyEPfxGjuSPOuuWEpZi+N4j4Ekn+qdFqSUMgcvcDHJrl4ttmOllJpzF5PQX9tLE7yO0STrelTva1fsAtWiF5IMVshy3MasXqKVUgqmJfnapV8/brTySilHMTfJxnEm1RPSyPAURyrkAYaSnJ4A5Ay+VMibZhq1pSryvOqHDuB8vK1H+IVlST43dw9jQYVUEx1KcrU5mIxN7cnhLHai+qK+l5OMNnePVTNWyCWMJNk7gXZu4U6FbMG+JIv/B9K4e6TVXillCt5VOyc52cMnG3Atye+uEQ9hdpLVbccO4BxWJHnyL8c2Wmxv7L80yXDn7uyvbWF3kvPjgUopg6j6rU9yc2x3Ouy8GSfwCnVaD1HHWXdrJep5/RVsTfLory3uANX/xzasQRV7Kj7icdUGV5L87PzSPxSYztlh1yy0AAAAAElFTkSuQmCC"},"8da1":function(e,t,n){"use strict";n("6b7e")},c7ed:function(e,t,n){"use strict";n("1c5f")},e7eb:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAYAAACpF6WWAAADK0lEQVQ4T5VUS2hkVRA953XndXocI4oaiRFEspAkNv3udWEQh0ZxEFGzEMSdiIwLUQjqQjTgyg+CP8TNMOhqBgY/g7oyIiLo6ObW6zcdMnEIGgQdP4yxozgv3b5XcmM6PJN0Jtay6txTdavqFNHHarXaaLlcvpNkQ1WvBbAPQAfATwC+UNWP4zhOdnrOrc5arXZluVx+luQjADIAp1X1O5J/quogyatV9QaSVQBznU7nyVar1Sry/IfUGHMrgA8BKMk3syx7sdls/r41caPRKLfb7UNBEDylqtcAeFxEXvfvPHaTNIqi20h+QjJpt9sHl5aWfu3XmoK/ZIw5CuA+ALMi8vwm6caXvyV5xjlnexn3QLoOsdYeAfBQnueNOI4/X6/UGPOad66url63xwq35TPGnAKQi4jhxMTEZZVKxX/1DRGZ6aGnpqaqaZpe2q/aOI5/AfB3L26MuYvkR1mWHaQx5m6SH3Q6nfFWq7VYAJ0kOdWPVFX9cF4txo0xKwAOM4qix0i+ICL7iwBr7SV5nt/Yj3RlZeXL5eXldAvpSQBnfaUzJGedc5fvdTD9cMaYT0me96QPAjiSpml1YWHBK2bdfK8HBwcP7JJozjn315ZKFwB8zVqtZgYGBpyq3i8ixws9/YrkTbuQPuGce6UXn5ycHA7D8Gye54/6lfLVngZwTkRu7oHGx8fDMAy93ne0ZrP5x4aMe7v6sqrOqOpV63tar9engyA4sSE3v7P/24wxbwH4UURmezINjDHHSE57ETjnju2F1Rjznqp+E8fx00X8pvattftU9TjJO1T1JRF55kLE1tqWv2Aics+OpN45NjZWGRoaehdAJCKjw8PDF42MjBzodrsyPz//c2GID5OsAPBX6jeShwGcd8697fu87Z56hQF4B8AJkvcCGPBk+q+NdrvdUhiGyySDYnU+mGXZ9UmSnNlGWq/Xby+VSnOqukbyOX+IVdUf5v1xHPszl0VRdMXa2lqpWq1+pqrfp2n6QJ7n3cXFxXM+0TZSa+1RVZ3OsuyWJEni3fpqrT210VM/4E3bsdIgCC4WkfcvNCivxizLfkiSZK6I/QckP22B1KGk4AAAAABJRU5ErkJggg=="},fb6a:function(e,t,n){"use strict";var a=n("23e7"),s=n("861d"),i=n("e8b5"),r=n("23cb"),o=n("50c4"),c=n("fc6a"),d=n("8418"),u=n("b622"),f=n("1dde"),l=n("ae40"),h=f("slice"),m=l("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),y=[].slice,v=Math.max;a({target:"Array",proto:!0,forced:!h||!m},{slice:function(e,t){var n,a,u,f=c(this),l=o(f.length),h=r(e,l),m=r(void 0===t?l:t,l);if(i(f)&&(n=f.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?s(n)&&(n=n[p],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return y.call(f,h,m);for(a=new(void 0===n?Array:n)(v(m-h,0)),u=0;h<m;h++,u++)h in f&&d(a,u,f[h]);return a.length=u,a}})}}]);
//# sourceMappingURL=chunk-53ae1768.bc627928.js.map